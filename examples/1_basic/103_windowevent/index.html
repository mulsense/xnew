<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="../../dist/xnew.js"></script>
  <script src="../../thirdparty/tailwindcss/playcdn.js"></script>
</head>

<body>
  <div id="main" class="relative w-full h-full"></div>

  <script>
    xnew(document.querySelector('#main'), Main);
    
    function Main(unit) {
      const t1 = xnew(Test);
      const t2 = xnew(Test);
      const t3 = xnew(Test);
      const t4 = xnew(Test);
      const t5 = xnew(Test);
      t1.finalize();
      t2.finalize();
      t3.finalize();
      t4.finalize();
    
      count(unit);
    }

    function count(unit) {
      let count = 0;
      let context = unit._.currentContext;
      while (context) {
        count++;
        context = context.previous;
      }
      console.log('count:', count);
    }
    function Test(unit) {
    }
  </script>
</body>

</html>