<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="../../dist/xnew.js"></script>
</head>

<body>
  <div id="main" style="width: 100%; height: 100%;"></div>
  <script>
    xnew('#main', (self) => {
      xnew.nest({ style: { position: 'absolute', width: '400px', height: '300px', inset: 0, margin: 'auto', background: '#000', overflow: 'hidden' }});
      xnew.interval(() => xnew(Cube), 10);
    });

    function Cube(self) {
      const left = (Math.random() * 400 - 15) + 'px';
      const top = (Math.random() * 300 - 15) + 'px';
      xnew.nest({ style: { position: 'absolute', top, left, width: '30px', height: '30px', background: '#F80' }});

      xnew.transition((progress) => self.element.style.opacity = progress, 1000);
      xnew.timer(() => self.finalize(), 2000);

      return {
        update(count) {
          self.element.style.transform = `rotate(${count}deg)`;
        },
      };
    }
  </script>
</body>

</html>