<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="../../dist/xnew.js"></script>
  <script src="../../thirdparty/tailwindcss/playcdn.js"></script>
</head>

<body>
  <div id="main" class="relative w-full h-full"></div>

  <script>
    xnew(document.querySelector('#main'), Main);
    
    function Main(unit) {
      xnew.nest('<div class="p-4">');

      xnew(Console, { title: 'window.*', key: '+window' });
      xnew(Console, { title: 'window.keydown or window.keyup', key: '+key' });
      xnew(Console, { title: 'window.keydown.arrow or window.keyup.arrow', key: '+arrow' });
      xnew(Console, { title: 'window.keydown.wasd or window.keyup.wasd', key: '+wasd' });

      unit.on('window.keydown window.keyup', ({ event, type, code }) => {
        xnew.emit('+key', { text: `${type}: ${code}` });
      });
      unit.on('window.keydown.arrow window.keyup.arrow', ({ event, type, vector }) => {
        xnew.emit('+arrow', { text: `${type}: [${vector.x}, ${vector.y}]` });
      });
      unit.on('window.keydown.wasd window.keyup.wasd', ({ event, type, vector }) => {
        xnew.emit('+wasd', { text: `${type}: [${vector.x}, ${vector.y}]` });
      });

      unit.on('window.scroll window.resize', ({ event, type }) => {
        xnew.emit('+window', { text: `${type}` });
      });
    }

    function Console(unit, { title, key }) {
      xnew('<p>', title);
      const div = xnew('<div class="m-0.5 p-1 rounded bg-gray-200">', 'Console')
      div.on(key, ({ text }) => div.element.textContent = text);
    }
  </script>
</body>

</html>