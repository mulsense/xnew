<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="../../dist/xnew.js"></script>
  <script src="../../thirdparty/tailwindcss/playcdn.js"></script>
</head>

<body class="m-0 p-0 w-full h-screen overflow-hidden">
  <div id="main" class="relative w-full h-full"></div>
  <script>
    xnew(document.querySelector('#main'), (unit) => {
      xnew.nest('<div class="p-2 flex gap-2 items-baseline justify-between">');
        
      const textunit = xnew('<div class="m-0.5 p-1 rounded bg-gray-200">', 'Console');
      textunit.on('+console', ({ text }) => textunit.element.textContent = text);
      
      xnew(MyPanel);
    });

    function MyPanel(panel) {
      xnew.nest('<div class="absolute top-2 right-2 w-48 text-sm">');
      xnew.nest('<div class="max-h-[calc(100vh-1rem)] overflow-y-auto p-1 border rounded-lg shadow-lg bg-gray-100 text-green-900">');
      xnew.extend(xnew.basics.Panel, { name: 'My Panel', open: true });
      
      panel.group({ name: 'group 1', open: true }, (group) => {
        group.button('button1').on('click', () => xnew.emit('+console', { text: 'button1 clicked' }));
        group.button('button2').on('click', () => xnew.emit('+console', { text: 'button2 clicked' }));
        group.button('button3').on('click', () => xnew.emit('+console', { text: 'button3 clicked' }));
        group.separator();
      });

      panel.range('data', { value: 20, min: 0, max: 60, step: 2 }).on('input', ({ value }) => xnew.emit('+console', { text: `data changed to ${value}` }));
      panel.checkbox('flag').on('input', ({ value }) => xnew.emit('+console', { text: `flag changed to ${value}` }));
      panel.select('color', { items: ['red', 'green', 'blue'] }).on('input', ({ value }) => xnew.emit('+console', { text: `color changed to ${value}` }));
      panel.separator();

      const show = panel.checkbox('show');
      const group = panel.group({ open: false }, (group) => {
        xnew('<p class="m-1">', 'hellow');
      });
      show.on('input', ({ value }) => value ? group.open() : group.close());
    }
  </script>
</body>

</html>