<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="../../dist/xnew.js"></script>
  <script src="../../thirdparty/tailwindcss/playcdn.js"></script>
</head>

<body class="m-0 p-0 w-full h-screen overflow-hidden">
  <div id="main" class="relative w-full h-full"></div>
  <script>
    xnew(document.querySelector('#main'), (unit) => {
      xnew.nest('<div class="p-2 flex gap-x-4 flex-wrap">');
        
      xnew('<div>', (unit) => {
        xnew('<p>', 'canvas');
        const p = xnew('<p>');
        xnew.nest('<div class="w-32 h-32 border rounded-lg overflow-hidden">');

        const canvas = xnew('<canvas width="400" height="200" class="w-full">');
        draw(p, canvas.element)
      });

      xnew('<div>', (unit) => {
        xnew('<p>', 'fit: contain');
        const p = xnew('<p>');
        xnew.nest('<div class="w-32 h-32 border rounded-lg overflow-hidden">');

        const screen = xnew(xnew.basics.Screen, { width: 400, height: 200, fit: 'contain' });
        draw(p, screen.canvas)
      });
      
      xnew('<div>', (unit) => {
        xnew('<p>', 'fit: cover');
        const p = xnew('<p>');
        xnew.nest('<div class="w-32 h-32 border rounded-lg overflow-hidden">');

        const screen = xnew(xnew.basics.Screen, { width: 400, height: 200, fit: 'cover' });
        draw(p, screen.canvas)
      });

      xnew('<div>', (unit) => {
        xnew('<p>', 'fit: fill');
        const p = xnew('<p>');
        xnew.nest('<div class="w-32 h-32 border rounded-lg overflow-hidden">');
        const screen = xnew(xnew.basics.Screen, { width: 400, height: 200, fit: 'fill' });
        draw(p, screen.canvas)
      });

      xnew('<div>', (unit) => {
        xnew('<p>', 'fit: resize');
        const p = xnew('<p>');
        xnew.nest('<div class="w-32 h-32 border rounded-lg overflow-hidden">');

        const screen = xnew(xnew.basics.Screen, { width: 400, height: 200, fit: 'resize' });
        screen.on('resize', () => {
          draw(p, screen.canvas)
        });
      });

      function draw(p, canvas) {
        p.element.textContent = `(${canvas.width}, ${canvas.height})`;

        const context = canvas.getContext('2d');
        const [cx, cy] = [canvas.width / 2, canvas.height / 2];
        const size = canvas.width / 6;

        context.fillStyle = 'rgb(0,0,0)';
        context.fillRect(0, 0, canvas.width, canvas.height);
        context.fillStyle = 'rgb(200,0,100)';
        context.fillRect(cx - 0.6 * cx - size / 2, cy - size / 2, size, size);
        context.fillStyle = 'rgb(100,200,0)';
        context.fillRect(cx + 0.0 * cx - size / 2, cy - size / 2, size, size);
        context.fillStyle = 'rgb(0,100,200)';
        context.fillRect(cx + 0.6 * cx - size / 2, cy - size / 2, size, size);
      }
    });

  </script>
</body>

</html>